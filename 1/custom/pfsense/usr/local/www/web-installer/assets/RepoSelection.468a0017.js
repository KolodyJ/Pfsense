import{r as i}from"./repoApi.0be87f43.js";import{s as l}from"./SystemInfoApi.c9fb53ba.js";import{x as n,n as p}from"./index.4ef18076.js";import{V as m}from"./index.f9fd3e90.js";import{_ as o}from"./VBtn.01587b6d.js";const c={data(){return{formTemplate:[{elements:[{element:n.componentsByTypes.defaultSelect,optionsKey:"repos",modelKey:"name",label:"Repo",itemText:"desc",itemValue:"name"}]}]}}};var d=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("card",{staticClass:"ma-5 cards",attrs:{title:"Repo Selection"}},[t(m,[t("form-helper",{ref:"repoForm",attrs:{item:e.selected,template:e.formTemplate,additionalItems:e.additionalItems}})],1)],1),t("base-dialog",{ref:"dialog",attrs:{title:"pfSense Plus",width:600,confirmCallback:e.refresh},model:{value:e.dialogPlus,callback:function(a){e.dialogPlus=a},expression:"dialogPlus"}},[t("p",[e._v(" This device is not registered for pfSense plus! To do so please visit the "),t("a",{attrs:{href:"https://netgate.com/purchase-plus",target:"_blank"}},[e._v("Netgate Store")]),e._v("! ")]),e._v(" NDI: "+e._s(this.$store.state.SystemInformation.ndi)+" ")]),t("div",{staticClass:"d-flex justify-center mb-3"},[t(o,{staticClass:"mr-5",attrs:{color:"error"},on:{click:e.reset}},[e._v("Reset")]),t(o,{staticClass:"mr-5",attrs:{color:"error"},on:{click:e.goBack}},[e._v("Back")]),t(o,{attrs:{color:"success"},on:{click:e.install}},[e._v("Install")])],1)],1)},f=[];const u={mixins:[c],data(){return{repoApi:i(),repos:[],selected:{name:""},systemInfoApi:l(),dialogPlus:!0}},methods:{refresh(){this.repoApi.fetchRepos().then(()=>{this.systemInfoApi.getSystemInfo().then(e=>{this.$store.commit("updateSystemInfo",e.data),this.repos=e.data.repos})}),this.$refs.dialog.close()},goBack(){this.repoApi.resetRepos(),this.$router.push("/disk-selection")},reset(){this.repoApi.resetInstall(),this.$router.push("/")},install(){this.repoApi.setupRepo({},new URLSearchParams({repo:this.selected.name})).then(e=>{e.data.status==="ok"&&this.$router.push("/install")})}},computed:{additionalItems(){return{repos:this.$store.state.SystemInformation.repos.map(e=>({name:e.name,desc:e.desc}))}}},mounted(){this.refresh(),this.repos.forEach(e=>{e.type==="plus"&&(this.dialogPlus=!1)}),this.dialogPlus&&this.$refs.dialog.open()}},r={};var h=p(u,d,f,!1,_,null,null,null);function _(e){for(let s in r)this[s]=r[s]}var k=function(){return h.exports}();export{k as default};
