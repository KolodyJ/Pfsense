import{S as s,x as n,b as c,n as m}from"./index.4ef18076.js";import{s as d}from"./SystemInfoApi.c9fb53ba.js";import{V as l}from"./index.f9fd3e90.js";import{_ as o}from"./VBtn.01587b6d.js";const f={resetNIC:{url:()=>"installer/nic-assign-reset",method:s.methods.GET},setNICAddress:{url:()=>"installer/nic-assign-reset",method:s.methods.POST,cleanDataBeforeSave:!1},setNIC:{url:()=>"installer/nic-assign",method:s.methods.POST,cleanDataBeforeSave:!1},setNICMode:{url:()=>"installer/nic-mode",method:s.methods.POST,cleanDataBeforeSave:!1},setNICVLAN:{url:()=>"installer/nic-vlan",method:s.methods.POST,cleanDataBeforeSave:!1}};var u=()=>new s(f);const h={data(){return{wanForm:[{elements:[{element:n.componentsByTypes.defaultSelect,optionsKey:"interfaces",modelKey:"if",label:"Select Interface",clearable:!1,itemText:"text",md:4,itemValue:"value",rules:[c.isNotEmpty,(e,{items:a})=>a[0].if!==a[1].if||"Please select different intefaces"]},{element:n.componentsByTypes.defaultSwitch,label:"Enable VLAN",modelKey:"vlanEnable",md:2},{element:n.componentsByTypes.defaultTextField,label:"VLAN Tag",modelKey:"vlan",type:"number",md:2,min:0,max:4095,disabled:({item:e})=>!e.vlanEnable}]}],lanForm:[{elements:[{element:n.componentsByTypes.defaultSelect,optionsKey:"lanInterfaces",modelKey:"interface",label:"Select Interface",clearable:!1,itemText:"text",md:4,itemValue:"value",rules:[(e,{items:a})=>!e||a[0].if!==a[1].if||"Please select different intefaces"]},{element:n.componentsByTypes.defaultSwitch,label:"Enable VLAN",modelKey:"vlanEnable",md:2},{element:n.componentsByTypes.defaultTextField,label:"VLAN Tag",modelKey:"vlan",type:"number",md:2,min:0,max:4095,disabled:({item:e})=>!e.vlanEnable}]}]}},methods:{defaultData(){return{wan:{if:"",vlanEnable:!1,vlan:0},lan:{if:"",vlanEnable:!1,vlan:0}}}}};var p=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("card",{staticClass:"ma-5 cards",attrs:{title:"WAN Interface Configuration"}},[t(l,[t("p",[e._v("The installer requires an internet connection, please set up the WAN interface you would like to use.")]),t("form-helper",{ref:"wanForm",attrs:{item:e.networkSettings.wan,template:e.wanForm,"additional-items":e.additionalItems,"table-items":e.tableItems}})],1)],1),t("card",{staticClass:"ma-5 cards",attrs:{title:"LAN Interface Configuration"}},[t(l,[t("p",[e._v("If you would like to do so, please set up your LAN interface.")]),t("form-helper",{ref:"lanForm",attrs:{item:e.networkSettings.lan,template:e.lanForm,"additional-items":e.additionalItems,"table-items":e.tableItems}})],1)],1),t("base-dialog",{ref:"dialog",attrs:{title:"Interfaces Detected",confirmCallback:e.closeDialog},model:{value:e.autodetectDialog,callback:function(r){e.autodetectDialog=r},expression:"autodetectDialog"}},[e._v(" The interfaces have automatically been detected, please check to make sure that the selected options are correct. ")]),t("div",{staticClass:"d-flex justify-center mb-3"},[t(o,{staticClass:"mr-5",attrs:{color:"error"},on:{click:e.goBack}},[e._v("Back")]),t(o,{attrs:{color:"success"},on:{click:e.connectNetwork}},[e._v("Continue")])],1)],1)},v=[];const w={mixins:[h],data(){return{systemInfoApi:d(),networkApi:u(),networkSettings:this.defaultData(),autodetectDialog:!1,nics:[]}},methods:{refresh(){this.systemInfoApi.getSystemInfo().then(e=>{this.$store.commit("updateSystemInfo",e.data),this.nics=e.data.nics,this.networkSettings.lan=e.data.lan,this.networkSettings.wan=e.data.wan,this.networkSettings.wan.if!==""&&this.$refs.dialog.open()})},connectNetwork(){!this.$refs.wanForm.validate()||!this.$refs.lanForm.validate()||(delete this.networkSettings.wan.vlanEnable,delete this.networkSettings.lan.vlanEnable,this.networkApi.setNIC({},new URLSearchParams({wan:this.networkSettings.wan.if,lan:this.networkSettings.lan.if})).then(()=>{this.$router.push("/disk-selection")}))},goBack(){this.networkApi.resetNIC(),this.$router.push("/")},closeDialog(){this.$refs.dialog.close()}},computed:{additionalItems(){const e=this.nics.map(t=>({value:t.name,text:t.name})),a=this.nics.map(t=>({value:t.name,text:t.name}));return a.push({value:"",text:"none"}),{interfaces:e,lanInterfaces:a}},tableItems(){return[this.networkSettings.wan,this.networkSettings.lan]}},mounted(){this.refresh()}},i={};var y=m(w,p,v,!1,b,null,null,null);function b(e){for(let a in i)this[a]=i[a]}var I=function(){return y.exports}();export{I as default};
